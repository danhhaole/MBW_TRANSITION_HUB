[
 {
  "auto_convert_images_to_webp": 1,
  "body_html": null,
  "default_language": "en",
  "docstatus": 0,
  "doctype": "Builder Settings",
  "favicon": null,
  "head_html": "<script src=\"https://cdn.tailwindcss.com\"></script>",
  "home_page": null,
  "modified": "2025-10-23 09:57:36.766988",
  "name": "Builder Settings",
  "script": "// // Write your script here\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const btn = document.getElementById(\"apply-form\");\n  const domain_name = window.location.origin;\n  console.log(\"domain_name>>>>>>>>>>>\", domain_name);\n  let pathname = window.location.pathname;\n  let path = pathname.split(\"/\")[2];\n  var order_details = \"\";\n  console.log(\"path>>>>>>>>>>>\", path);\n  var idopt = document.getElementById(\"opt_select\");\n  var lst_data = [\n    { value: \"python\", label: \"L·∫≠p tr√¨nh vi√™n Python\" },\n    { value: \"marketing\", label: \"Chuy√™n vi√™n marketing\" },\n    { value: \"support\", label: \"Nh√¢n vi√™n chƒÉm s√≥c kh√°ch h√†ng\" },\n    { value: \"test\", label: \"Nh√¢n vi√™n Test\" },\n    { value: \"kt\", label: \"Nh√¢n vi√™n k·ªπ thu·∫≠t\" },\n    { value: \"ds\", label: \"Nh√¢n vi√™n thi·∫øt k·∫ø\" },\n    { value: \"kd\", label: \"Nh√¢n vi√™n kinh doanh\" },\n    { value: \"htkt\", label: \"Nh√¢n vi√™n tri·ªÉn khai\" },\n  ];\n  idopt.innerHTML = \"\";\n  var opt_lst = [\"<option value=>Ch·ªçn</option>\"];\n  lst_data.forEach((item) => {\n    var option = `<option value=\"${item.value}\">${item.label}</option>`;\n    opt_lst.push(option);\n  });\n  idopt.innerHTML = opt_lst;\n\n  if (path) getJobDetails(path);\n\n  // H√†m g·ªçi POST method (d√πng chung)\n  async function post_Method(api, payload) {\n    try {\n      const response = await fetch(`${domain_name}/api/method/${api}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!response.ok) {\n        const text = await response.text();\n        throw new Error(`HTTP ${response.status}: ${text}`);\n      }\n\n      const data = await response.json();\n      return data;\n    } catch (err) {\n      console.error(\"‚ùå post_Method error:\", err);\n      return { error: err.message };\n    }\n  }\n\n  // H√†m l·∫•y chi ti·∫øt JobOpening\n  async function getJobDetails(path) {\n    const resp = await post_Method(\"frappe.client.get_value\", {\n      doctype: \"Mira Job Opening\",\n      fieldname: [\"*\"], // l·∫•y t·∫•t c·∫£ field\n      filters: [[\"job_url_cms\", \"=\", path]],\n    });\n\n    console.log(\">>> JobOpening by job_url_cms:\", resp);\n\n    if (resp && resp.message) {\n      const order_details = resp.message;\n      console.log(\"‚úÖ Job Opening details:\", order_details);\n      detailComponent(order_details);\n    } else {\n      console.warn(\"‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y b·∫£n ghi ho·∫∑c l·ªói API:\", resp);\n    }\n  }\n\n  // H√†m l·∫•y danh s√°ch Mira Job Opening (gi·ªõi h·∫°n 6 b·∫£n ghi)\n  async function getJobOpeningList() {\n    const resp = await post_Method(\"frappe.client.get_list\", {\n      doctype: \"Mira Job Opening\",\n      fields: [\"*\"], // l·∫•y t·∫•t c·∫£ field\n      limit_page_length: 6,\n      order_by: \"creation desc\",\n    });\n\n    console.log(\">>> Danh s√°ch Mira Job Opening:\", resp);\n\n    if (resp && resp.message && resp.message.length > 0) {\n      const jobs = resp.message;\n      console.log(\"‚úÖ Job Opening list (6 items):\", jobs);\n      renderJobList(jobs);\n    } else {\n      console.warn(\"‚ö†Ô∏è Kh√¥ng c√≥ d·ªØ li·ªáu ho·∫∑c l·ªói API:\", resp);\n      const jobContainer = document.getElementById(\"items\");\n      if (jobContainer) {\n        jobContainer.innerHTML = `<p class=\"text-center text-gray-500\">Kh√¥ng c√≥ c√¥ng vi·ªác n√†o ƒë·ªÉ hi·ªÉn th·ªã.</p>`;\n      }\n    }\n  }\n\n  // H√†m render danh s√°ch job ra div#items\n  function renderJobList(jobs) {\n    const jobContainer = document.getElementById(\"items\");\n    if (!jobContainer) {\n      console.error(\"‚ùå Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ c√≥ id='items'\");\n      return;\n    }\n\n    jobContainer.innerHTML = \"\"; // X√≥a n·ªôi dung c≈© n·∫øu c√≥\n\n    jobs.forEach((job) => {\n      const jobElement = document.createElement(\"a\");\n      jobElement.href = `/${job.job_url_cms || \"#\"}`;\n      jobElement.className =\n        \"flex flex-col justify-between text-left w-full p-6 bg-white border border-gray-200 rounded-lg shadow hover:shadow-lg transition cursor-pointer item-job\";\n\n      jobElement.innerHTML = `\n        <!-- Top: Category + Time -->\n        <div class=\"flex items-center justify-between mb-3\">\n          <p class=\"text-xs font-medium px-4 py-1 text-gray-700 bg-white rounded-md border\">\n            ${job.posting_date || \"Ng√†y ƒëƒÉng\"}\n          </p>\n          <span class=\"text-gray-400 text-sm\">${\n            job.closing_date || \"ƒêang c·∫≠p nh·∫≠t\"\n          }</span>\n        </div>\n\n        <!-- Job Title -->\n        <h5 class=\"mb-4 text-lg font-bold tracking-tight text-black line-clamp-2 text-red\">\n          ${job.job_title || \"V·ªã tr√≠ tuy·ªÉn d·ª•ng\"}\n        </h5>\n\n        <!-- Job Info -->\n        <div class=\"flex flex-col gap-1 text-sm text-gray-600\">\n          <p class=\"flex gap-2 items-center\">\n            <img src=\"/assets/mbw_mira/images/Location.webp\" alt=\"\" class=\"w-4 h-4\"/>\n            <span class=\"font-normal text-base text-[#212B36]\">${\n              job.location_name || \"ƒê·ªãa ƒëi·ªÉm kh√¥ng x√°c ƒë·ªãnh\"\n            }</span>\n          </p>\n          <p class=\"flex gap-2 items-center\">\n            <img src=\"/assets/mbw_mira/images/Work.webp\" alt=\"\" class=\"w-4 h-4\"/>\n            <span class=\"font-normal text-base text-[#212B36]\">${\n              job.jo_work_form || \"H√¨nh th·ª©c l√†m vi·ªác\"\n            }</span>\n          </p>\n          ${\n            job.jo_salary\n              ? `<p class=\"flex gap-2 items-center\">\n                  <img src=\"/assets/mbw_mira/images/Money.webp\" alt=\"\" class=\"w-4 h-4\"/>\n                  <span class=\"font-normal text-base text-[#212B36]\">${job.jo_salary}</span>\n                </p>`\n              : `<p class=\"flex gap-2 items-center\">\n                  <img src=\"/assets/mbw_mira/images/Money.webp\" alt=\"\" class=\"w-4 h-4\"/>\n                  <span class=\"font-normal text-base text-[#212B36]\">Th·ªèa thu·∫≠n</span>\n                </p>`\n          }\n        </div>\n      `;\n\n      jobContainer.appendChild(jobElement);\n    });\n  }\n\n  btn.onclick = async function (e) {\n    e.preventDefault();\n\n    // üïê Ch·ªù 300ms ƒë·ªÉ Builder render input\n    setTimeout(async () => {\n      const inputs = document.querySelectorAll(\"input, textarea, select\");\n      console.log(\"Inputs t√¨m ƒë∆∞·ª£c:\", inputs);\n\n      const formData = {};\n      Array.from(inputs).forEach((input) => {\n        const key = input.name || input.id;\n        if (key) formData[key] = input.value;\n      });\n\n      console.log(\"Form data:\", formData);\n\n      const res = await fetch(\"/api/resource/Mira Talent\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData),\n      });\n\n      const data = await res.json();\n      console.log(\"Response:\", data);\n\n      if (res.ok) {\n        alert(\"·ª®ng tuy·ªÉn th√†nh c√¥ng!\");\n\n        // ‚úÖ Reset to√†n b·ªô input, textarea, select v·ªÅ r·ªóng\n        Array.from(inputs).forEach((input) => {\n          if (\n            input.tagName === \"INPUT\" ||\n            input.tagName === \"TEXTAREA\" ||\n            input.tagName === \"SELECT\"\n          ) {\n            input.value = \"\";\n          }\n        });\n      } else {\n        alert(\"C√≥ l·ªói x·∫£y ra khi ·ª©ng tuy·ªÉn!\");\n      }\n    }, 500); // <-- c√≥ th·ªÉ tƒÉng l√™n 1000 n·∫øu trang n·∫∑ng\n  };\n\n  // G·ªçi khi trang load\n  getJobOpeningList();\n});\n",
  "script_public_url": "/files/page_scripts/builder-asset-script.js?v=ccfa8deda2",
  "style": "/* Write your CSS here */\n.item-job {\n  cursor: pointer;\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.item-job:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);\n}\n\n.__text_block__:hover p{\n  color: #fffff\n}\n\n/* Write your CSS here */\n.form-custom {\n  border-radius: 8px;\n  border: 1px solid  #DFE3E8;\n}",
  "style_public_url": "/files/page_styles/builder-asset-style.css?v=edc7500632"
 }
]