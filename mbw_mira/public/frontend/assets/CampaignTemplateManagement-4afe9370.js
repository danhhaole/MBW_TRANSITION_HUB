import{_ as ge,c as te,r as _,w as ve,o as r,e as u,d as e,t,f as c,b as h,u as g,X as D,l as L,j as x,F as z,i as W,n as F,h as b,$ as B,s as pe,v as he,a as O,G as xe,U as se,x as fe,k as oe,J as ye,T as be,Q as we,L as ke}from"./index-d2648b45.js";import{C as Ce}from"./CampaignTemplateFormModal-e79aaa9f.js";const Me={key:0,class:"fixed z-50 inset-0 overflow-y-auto"},$e={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Se={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},Ae={class:"bg-white px-6 pt-6 pb-4 border-b border-gray-200"},Te={class:"flex items-center justify-between"},Le={class:"text-lg leading-6 font-medium text-gray-900"},je={class:"mt-1 text-sm text-gray-500"},Ne={class:"bg-white px-6 pt-6 pb-4 max-h-[70vh] overflow-y-auto"},De={class:"mb-4 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs"},Ve={key:0,class:"flex justify-center py-8"},Ee={class:"ml-3 text-gray-600"},Ie={key:1,class:"text-center py-8"},Pe={class:"text-red-600 mb-2"},Ue={key:2},Be={class:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200"},ze={class:"flex items-start space-x-4"},Fe={class:"flex-shrink-0"},He={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},Ke={class:"flex-1"},Re={class:"text-lg font-semibold text-gray-900"},qe={class:"text-sm text-gray-600 mt-1"},Oe={class:"flex items-center mt-3 space-x-4"},We={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Ge={class:"text-sm text-gray-500"},Je={class:"text-sm text-gray-500"},Qe={class:"space-y-6"},Xe={class:"text-lg font-semibold text-gray-900 flex items-center"},Ye={key:0,class:"text-center py-8 bg-gray-50 rounded-lg"},Ze={class:"text-gray-500"},et={key:1,class:"relative"},tt={class:"space-y-6"},st={class:"relative z-10"},ot={key:0,class:"absolute -top-3 -right-1 bg-indigo-100 text-indigo-800 text-xs font-medium px-1.5 py-0.5 rounded-full"},lt={class:"flex-1 min-w-0 pb-6"},at={class:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm"},nt={class:"flex items-center justify-between"},it={class:"flex items-center space-x-3"},rt={class:"text-sm font-semibold text-gray-900"},dt={class:"text-xs text-gray-500"},ct={key:0,class:"mt-2 flex items-center text-sm text-gray-600"},ut={key:1,class:"mt-3 p-3 bg-gray-50 rounded-md"},mt={class:"text-sm text-gray-700 font-medium mb-1"},_t={class:"text-sm text-gray-600 italic"},gt={key:2,class:"mt-3"},vt={class:"text-xs text-gray-500 font-medium mb-1"},pt={class:"flex flex-wrap gap-2"},ht={class:"mt-8 p-4 bg-gray-50 rounded-lg"},xt={class:"text-sm font-semibold text-gray-900 mb-2"},ft={class:"grid grid-cols-2 gap-4 text-sm"},yt={class:"text-gray-500"},bt={class:"font-medium text-gray-900 ml-2"},wt={class:"text-gray-500"},kt={class:"font-medium text-gray-900 ml-2"},Ct={class:"text-gray-500"},Mt={class:"font-medium text-gray-900 ml-2"},$t={class:"text-gray-500"},St={class:"font-medium text-gray-900 ml-2"},At={key:3,class:"text-center py-8"},Tt={class:"text-gray-500 mb-2"},Lt={class:"bg-gray-50 px-6 py-3 flex justify-end"},jt={__name:"CampaignTemplatePreviewModal",props:{modelValue:{type:Boolean,default:!1},templateId:{type:String,required:!0}},emits:["update:modelValue"],setup(H,{emit:K}){const a=l=>l,M=H,R=K,f=te({get:()=>M.modelValue,set:l=>R("update:modelValue",l)}),C=_(!1),v=_(""),p=_(null),d=_([]),V=te(()=>[...d.value].sort((l,m)=>l.step_order-m.step_order)),S=async()=>{if(console.log("Preview Modal - Loading template:",M.templateId),!M.templateId){console.log("Preview Modal - No templateId provided"),v.value=a("No template ID provided");return}C.value=!0,v.value="";try{console.log("Preview Modal - Calling service...");const l=await B.getById(M.templateId);console.log("Preview Modal - Service result:",l),l.success?(p.value=l.data,d.value=l.data.steps||[],console.log("Preview Modal - Template loaded:",p.value),console.log("Preview Modal - Steps loaded:",d.value.length)):(v.value=l.error||a("Failed to load template"),console.log("Preview Modal - Load failed:",v.value))}catch(l){console.error("Preview Modal - Error loading template:",l),v.value=a("An error occurred while loading template")}finally{C.value=!1}},A=()=>{f.value=!1},w=()=>d.value.reduce((l,m)=>l+(m.delay_in_days||0),0),$=(l,m)=>{let n=1;for(let k=0;k<m;k++)n+=V.value[k].delay_in_days||0;return n+(l.delay_in_days||0)},T=l=>d.value.filter(m=>m.action_type===l).length,E=l=>({SEND_EMAIL:"mail",SEND_SMS:"message-square",MANUAL_CALL:"phone",MANUAL_TASK:"clipboard"})[l]||"circle",I=l=>({SEND_EMAIL:"bg-blue-500",SEND_SMS:"bg-green-500",MANUAL_CALL:"bg-yellow-500",MANUAL_TASK:"bg-purple-500"})[l]||"bg-gray-500",U=l=>({SEND_EMAIL:"bg-blue-100 text-blue-800",SEND_SMS:"bg-green-100 text-green-800",MANUAL_CALL:"bg-yellow-100 text-yellow-800",MANUAL_TASK:"bg-purple-100 text-purple-800"})[l]||"bg-gray-100 text-gray-800",j=l=>({SEND_EMAIL:a("Send Email"),SEND_SMS:a("Send SMS"),MANUAL_CALL:a("Manual Call"),MANUAL_TASK:a("Manual Task")})[l]||l;return ve(f,l=>{l&&S()}),(l,m)=>f.value?(r(),u("div",Me,[e("div",$e,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:A}),m[2]||(m[2]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",Se,[e("div",Ae,[e("div",Te,[e("div",null,[e("h3",Le,t(a("Campaign Workflow Preview")),1),e("p",je,t(a("Preview how this template will execute in a campaign")),1)]),c(g(L),{variant:"ghost",size:"sm",onClick:A},{icon:h(()=>[c(g(D),{name:"x",class:"w-6 h-6"})]),_:1})])]),e("div",Ne,[e("div",De,[e("div",null,"Loading: "+t(C.value),1),e("div",null,"Error: "+t(v.value),1),e("div",null,"Template ID: "+t(H.templateId),1),e("div",null,"Template exists: "+t(!!p.value),1),e("div",null,"Steps count: "+t(d.value.length),1)]),C.value?(r(),u("div",Ve,[m[0]||(m[0]=e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1)),e("p",Ee,t(a("Loading template...")),1)])):v.value?(r(),u("div",Ie,[e("div",Pe,t(v.value),1),c(g(L),{variant:"outline",theme:"gray",onClick:S},{default:h(()=>[x(t(a("Retry")),1)]),_:1})])):p.value?(r(),u("div",Ue,[e("div",Be,[e("div",ze,[e("div",Fe,[e("div",He,[c(g(D),{name:"zap",class:"w-6 h-6 text-blue-600"})])]),e("div",Ke,[e("h4",Re,t(p.value.template_name),1),e("p",qe,t(p.value.description||a("No description provided")),1),e("div",Oe,[e("span",We,t(p.value.campaign_type),1),e("span",Ge,t(d.value.length)+" "+t(a("steps")),1),e("span",Je,t(w())+" "+t(a("days total duration")),1)])])])]),e("div",Qe,[e("h5",Xe,[c(g(D),{name:"play-circle",class:"w-5 h-5 mr-2 text-green-600"}),x(" "+t(a("Campaign Execution Flow")),1)]),d.value.length===0?(r(),u("div",Ye,[c(g(D),{name:"inbox",class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e("p",Ze,t(a("No steps defined yet")),1)])):(r(),u("div",et,[m[1]||(m[1]=e("div",{class:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200"},null,-1)),e("div",tt,[(r(!0),u(z,null,W(V.value,(n,k)=>(r(),u("div",{key:n.name,class:"relative flex items-start space-x-4"},[e("div",st,[e("div",{class:F(["flex items-center justify-center w-8 h-8 rounded-full border-2 border-white bg-white shadow-md",I(n.action_type)])},[c(g(D),{name:E(n.action_type),class:"w-4 h-4 text-white"},null,8,["name"])],2),$(n,k)>0?(r(),u("div",ot," Day "+t($(n,k)),1)):b("",!0)]),e("div",lt,[e("div",at,[e("div",nt,[e("div",it,[e("h6",rt,t(n.campaign_step_name),1),e("span",{class:F(["inline-flex items-center px-2 py-1 rounded text-xs font-medium",U(n.action_type)])},t(j(n.action_type)),3)]),e("div",dt," Step "+t(n.step_order),1)]),n.delay_in_days>0?(r(),u("div",ct,[c(g(D),{name:"clock",class:"w-4 h-4 mr-1"}),x(" "+t(a("Wait"))+" "+t(n.delay_in_days)+" "+t(n.delay_in_days===1?a("day"):a("days")),1)])):b("",!0),n.template_content?(r(),u("div",ut,[e("p",mt,t(a("Content Preview:")),1),e("p",_t,' "'+t(n.template_content.length>100?n.template_content.substring(0,100)+"...":n.template_content)+'" ',1)])):b("",!0),n.action_config&&Object.keys(n.action_config).length>0?(r(),u("div",gt,[e("p",vt,t(a("Configuration:")),1),e("div",pt,[(r(!0),u(z,null,W(n.action_config,(q,N)=>(r(),u("span",{key:N,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-yellow-100 text-yellow-800"},t(N)+": "+t(q),1))),128))])])):b("",!0)])])]))),128))])]))]),e("div",ht,[e("h6",xt,t(a("Campaign Summary")),1),e("div",ft,[e("div",null,[e("span",yt,t(a("Total Steps:")),1),e("span",bt,t(d.value.length),1)]),e("div",null,[e("span",wt,t(a("Duration:")),1),e("span",kt,t(w())+" "+t(a("days")),1)]),e("div",null,[e("span",Ct,t(a("Email Steps:")),1),e("span",Mt,t(T("SEND_EMAIL")),1)]),e("div",null,[e("span",$t,t(a("Manual Tasks:")),1),e("span",St,t(T("MANUAL_CALL")+T("MANUAL_TASK")),1)])])])])):(r(),u("div",At,[c(g(D),{name:"inbox",class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e("p",Tt,t(a("No template data available")),1),c(g(L),{variant:"outline",theme:"gray",onClick:S},{default:h(()=>[x(t(a("Reload")),1)]),_:1})]))]),e("div",Lt,[c(g(L),{variant:"outline",theme:"gray",onClick:A},{default:h(()=>[x(t(a("Close")),1)]),_:1})])])])])):b("",!0)}},Nt=ge(jt,[["__scopeId","data-v-b061c1e6"]]),Dt={class:"min-h-screen bg-gray-50"},Vt={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-6"},Et={class:"bg-white rounded-lg border border-gray-200 p-4 mb-6"},It={class:"flex flex-wrap items-center justify-between gap-4"},Pt={class:"flex items-center space-x-4 flex-1"},Ut={class:"flex items-center space-x-3"},Bt={key:0,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-6"},zt={class:"bg-white overflow-hidden rounded-lg"},Ft={class:"p-5"},Ht={class:"flex items-center"},Kt={class:"ml-5 w-0 flex-1"},Rt={class:"text-sm font-medium text-gray-500 truncate"},qt={class:"text-lg font-medium text-gray-900"},Ot={class:"bg-white overflow-hidden rounded-lg"},Wt={class:"p-5"},Gt={class:"flex items-center"},Jt={class:"ml-5 w-0 flex-1"},Qt={class:"text-sm font-medium text-gray-500 truncate"},Xt={class:"text-lg font-medium text-gray-900"},Yt={class:"bg-white overflow-hidden rounded-lg"},Zt={class:"p-5"},es={class:"flex items-center"},ts={class:"ml-5 w-0 flex-1"},ss={class:"text-sm font-medium text-gray-500 truncate"},os={class:"text-lg font-medium text-gray-900"},ls={class:"bg-white overflow-hidden rounded-lg"},as={class:"p-5"},ns={class:"flex items-center"},is={class:"ml-5 w-0 flex-1"},rs={class:"text-sm font-medium text-gray-500 truncate"},ds={class:"text-sm font-medium text-gray-900"},cs={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},us={key:1,class:"p-8"},ms={class:"text-center"},_s={class:"mt-2 text-sm font-medium text-gray-900"},gs={class:"mt-1 text-sm text-gray-500"},vs={class:"mt-6"},ps={key:2,class:"p-8"},hs={class:"text-center"},xs={class:"mt-2 text-sm font-medium text-gray-900"},fs={class:"mt-1 text-sm text-gray-500"},ys={class:"mt-6"},bs={key:3},ws={class:"bg-gray-50 px-6 py-3 border-b border-gray-200"},ks={class:"grid grid-cols-12 gap-4 text-xs font-medium text-gray-500 uppercase tracking-wider"},Cs={class:"col-span-3"},Ms={class:"col-span-2"},$s={class:"col-span-2"},Ss={class:"col-span-1"},As={class:"col-span-2"},Ts={class:"col-span-2"},Ls={class:"divide-y divide-gray-200"},js=["onClick"],Ns={class:"grid grid-cols-12 gap-4 items-center"},Ds={class:"col-span-3"},Vs={class:"flex items-center space-x-3"},Es={class:"min-w-0 flex-1"},Is={class:"text-sm font-medium text-gray-900 truncate"},Ps={class:"text-xs text-gray-500 truncate"},Us=["title"],Bs={class:"col-span-2"},zs={class:"col-span-2"},Fs={class:"flex items-center space-x-2"},Hs={class:"text-sm text-gray-900"},Ks={class:"col-span-1"},Rs={class:"flex items-center space-x-1"},qs={class:"text-sm font-medium text-gray-900"},Os={class:"col-span-2"},Ws={class:"text-sm text-gray-900"},Gs={class:"text-xs text-gray-500"},Js={class:"flex items-center gap-2"},Qs=["onClick"],Xs=["onClick"],Ys={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Zs={class:"flex items-center justify-between"},eo={class:"flex-1 flex justify-between sm:hidden"},to=["disabled"],so=["disabled"],oo={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},lo={class:"text-sm text-gray-700"},ao={class:"font-medium"},no={class:"font-medium"},io={class:"font-medium"},ro={class:"relative z-0 inline-flex rounded-md -space-x-px","aria-label":"Pagination"},co=["disabled"],uo={class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},mo=["disabled"],_o={key:2,class:"fixed z-50 inset-0 overflow-y-auto"},go={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},vo={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},po={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ho={class:"sm:flex sm:items-start"},xo={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},fo={class:"text-lg leading-6 font-medium text-gray-900"},yo={class:"mt-2"},bo={class:"text-sm text-gray-500"},wo={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ko=["disabled"],Co={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Mo=["disabled"],Ao={__name:"CampaignTemplateManagement",setup(H){const K=(s,o)=>{let y;return(...P)=>{clearTimeout(y),y=setTimeout(()=>s.apply(null,P),o)}};xe();const{showSuccess:a,showError:M}=we(),R=[{label:__("Campaign Templates"),route:{name:"CampaignTemplateManagement"}}],f=_(!1),C=_(null),v=_([]),p=_({}),d=_({}),V=_(""),S=_(""),A=_(""),w=_(1),$=_(!1),T=_(!1),E=_(!1),I=_(null),U=_(null),j=_(null),l=_(!1),m=()=>{if(!p.value.by_type)return"N/A";const s=Object.entries(p.value.by_type);return s.length===0?"N/A":s.reduce((y,P)=>P[1].total>y[1].total?P:y)[0]},n=async()=>{f.value=!0,C.value=null;try{const s={page_length:20,start:(w.value-1)*20,search_text:V.value,filters:q()},o=await B.getList(s);o.success?(v.value=o.data.data||[],d.value={total:o.data.total||0,page:w.value,limit:20,pages:Math.ceil((o.data.total||0)/20),has_next:o.data.has_next||!1,has_prev:o.data.has_prev||!1,showing_from:o.data.showing_from||0,showing_to:o.data.showing_to||0}):(C.value=o.error||__("Unable to load templates"),v.value=[],d.value={})}catch(s){console.error("Error loading templates:",s),C.value=__("An error occurred while loading templates"),v.value=[],d.value={}}finally{f.value=!1}},k=async()=>{try{const s=await B.getStatistics();s.success&&(p.value=s.data)}catch(s){console.error("Error loading statistics:",s)}},q=()=>{const s={};if(S.value&&(s.campaign_type=S.value),A.value)switch(A.value){case"active":s.is_active=1;break;case"inactive":s.is_active=0;break}return s},N=()=>{w.value=1,n(),k()},le=K(()=>{w.value=1,n()},300),G=()=>{w.value=1,n()},J=()=>{I.value=null,$.value=!0},ae=s=>{console.log("Management - Preview clicked for template:",s),U.value=s,console.log("Management - templateToPreview set to:",U.value),console.log("Management - Template name for ID:",s==null?void 0:s.name),T.value=!0},ne=async s=>{f.value=!0;try{const o=await B.getById(s.name);o.success?(I.value=o.data,$.value=!0):M(o.error||__("Failed to load template data"))}catch(o){console.error("Error loading template for edit:",o),M(__("An error occurred while loading template"))}finally{f.value=!1}},ie=s=>{j.value=s,E.value=!0},re=async()=>{if(j.value){l.value=!0;try{const s=await B.delete(j.value.name);s.success?(a(s.message||__("Template deleted successfully")),E.value=!1,j.value=null,N()):M(s.error||__("Failed to delete template"))}catch(s){console.error("Error deleting template:",s),M(__("An error occurred while deleting template"))}finally{l.value=!1}}},de=s=>{if(!I.value&&s){k();return}$.value=!1,N()},ce=()=>{k(),n()},Q=()=>{d.value.has_next&&(w.value++,n())},X=()=>{d.value.has_prev&&w.value>1&&(w.value--,n())},ue=s=>{if(!s)return"";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return s}},me=s=>({Email:"bg-blue-100 text-blue-800",SMS:"bg-green-100 text-green-800",Ads:"bg-purple-100 text-purple-800","Social Media":"bg-pink-100 text-pink-800","Direct Mail":"bg-orange-100 text-orange-800"})[s]||"bg-gray-100 text-gray-800",_e=s=>s?"bg-green-400":"bg-gray-400";return pe(()=>{n(),k()}),(s,o)=>{var Y,Z;const y=se("FeatherIcon"),P=se("TextInput");return r(),u(z,null,[e("div",Dt,[c(he,null,{"left-header":h(()=>[c(g(fe),{items:R})]),"right-header":h(()=>[c(g(L),{variant:"solid",theme:"gray",onClick:J,loading:f.value},{prefix:h(()=>o[7]||(o[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])),default:h(()=>[x(" "+t(s.__("Create Template")),1)]),_:1},8,["loading"])]),_:1}),e("div",Vt,[e("div",Et,[e("div",It,[e("div",Pt,[c(P,{modelValue:V.value,"onUpdate:modelValue":o[0]||(o[0]=i=>V.value=i),type:"text",placeholder:s.__("Search templates..."),onInput:g(le),class:"flex-1 max-w-md"},{prefix:h(()=>[c(y,{name:"search",class:"w-4 h-4"})]),_:1},8,["modelValue","placeholder","onInput"]),c(g(oe),{type:"select",modelValue:S.value,"onUpdate:modelValue":o[1]||(o[1]=i=>S.value=i),onChange:G,options:[{label:s.__("All Types"),value:""},{label:s.__("Email"),value:"Email"},{label:s.__("SMS"),value:"SMS"},{label:s.__("Ads"),value:"Ads"},{label:s.__("Social Media"),value:"Social Media"},{label:s.__("Direct Mail"),value:"Direct Mail"}],class:"w-44"},null,8,["modelValue","options"]),c(g(oe),{type:"select",modelValue:A.value,"onUpdate:modelValue":o[2]||(o[2]=i=>A.value=i),onChange:G,options:[{label:s.__("All Status"),value:""},{label:s.__("Active"),value:"active"},{label:s.__("Inactive"),value:"inactive"}],class:"w-32"},null,8,["modelValue","options"])]),e("div",Ut,[c(g(L),{onClick:N,loading:f.value,variant:"outline",theme:"gray",size:"sm"},{prefix:h(()=>[c(y,{name:"refresh-cw",class:"w-4 h-4"})]),default:h(()=>[x(" "+t(s.__("Refresh")),1)]),_:1},8,["loading"])])])]),p.value&&!f.value?(r(),u("div",Bt,[e("div",zt,[e("div",Ft,[e("div",Ht,[o[8]||(o[8]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),e("div",Kt,[e("dl",null,[e("dt",Rt,t(s.__("Total Templates")),1),e("dd",qt,t(p.value.total||0),1)])])])])]),e("div",Ot,[e("div",Wt,[e("div",Gt,[o[9]||(o[9]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",Jt,[e("dl",null,[e("dt",Qt,t(s.__("Active")),1),e("dd",Xt,t(p.value.active||0),1)])])])])]),e("div",Yt,[e("div",Zt,[e("div",es,[o[10]||(o[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-gray-100 rounded-md flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",ts,[e("dl",null,[e("dt",ss,t(s.__("Inactive")),1),e("dd",os,t(p.value.inactive||0),1)])])])])]),e("div",ls,[e("div",as,[e("div",ns,[o[11]||(o[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-md flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])])],-1)),e("div",is,[e("dl",null,[e("dt",rs,t(s.__("Most Used")),1),e("dd",ds,t(m()),1)])])])])])])):b("",!0),e("div",cs,[f.value?(r(),O(ke,{key:0,text:"Loading templates..."})):C.value?(r(),u("div",us,[e("div",ms,[o[12]||(o[12]=e("svg",{class:"mx-auto h-12 w-12 text-red-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("h3",_s,t(s.__("Error loading templates")),1),e("p",gs,t(C.value),1),e("div",vs,[c(g(L),{onClick:N,variant:"solid",theme:"blue"},{default:h(()=>[x(t(s.__("Try Again")),1)]),_:1})])])])):!v.value||v.value.length===0?(r(),u("div",ps,[e("div",hs,[o[14]||(o[14]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("h3",xs,t(s.__("No templates found")),1),e("p",fs,t(s.__("Start by creating your first campaign template.")),1),e("div",ys,[c(g(L),{variant:"solid",theme:"gray",onClick:J,loading:f.value,class:"px-6 py-3.5"},{prefix:h(()=>o[13]||(o[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])),default:h(()=>[x(" "+t(s.__("Create Template")),1)]),_:1},8,["loading"])])])])):(r(),u("div",bs,[e("div",ws,[e("div",ks,[e("div",Cs,t(s.__("Template Name")),1),e("div",Ms,t(s.__("Type")),1),e("div",$s,t(s.__("Status")),1),e("div",Ss,t(s.__("Steps")),1),e("div",As,t(s.__("Modified")),1),e("div",Ts,t(s.__("Actions")),1)])]),e("div",Ls,[(r(!0),u(z,null,W(v.value,i=>(r(),u("div",{key:i.name,class:"px-6 py-4 hover:bg-gray-50 transition-colors duration-150 cursor-pointer",onClick:ee=>ae(i)},[e("div",Ns,[e("div",Ds,[e("div",Vs,[o[15]||(o[15]=e("div",{class:"w-10 h-10 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Es,[e("p",Is,t(i.template_name),1),e("p",Ps,t(i.name),1),i.description?(r(),u("p",{key:0,class:"text-xs text-gray-500 mt-1 truncate",title:i.description},t(i.description),9,Us)):b("",!0)])])]),e("div",Bs,[e("span",{class:F(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",me(i.campaign_type)])},t(i.type_display||i.campaign_type),3)]),e("div",zs,[e("div",Fs,[e("div",{class:F(["w-2 h-2 rounded-full",_e(i.is_active)])},null,2),e("span",Hs,t(i.display_status),1)])]),e("div",Ks,[e("div",Rs,[o[16]||(o[16]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),e("span",qs,t(i.step_count||0),1)])]),e("div",Os,[e("p",Ws,t(ue(i.modified)),1),e("p",Gs,t(i.modified_by||i.owner),1)]),e("div",{class:"col-span-2",onClick:o[3]||(o[3]=ye(()=>{},["stop"]))},[e("div",Js,[e("button",{onClick:ee=>ne(i),class:"inline-flex border items-center px-2.5 py-1.5 text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[c(y,{name:"edit",class:"w-3 h-3"})],8,Qs),e("button",{onClick:ee=>ie(i),class:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[c(y,{name:"trash-2",class:"w-3 h-3"})],8,Xs)])])])],8,js))),128))]),d.value&&d.value.total>d.value.limit?(r(),u("div",Ys,[e("div",Zs,[e("div",eo,[e("button",{onClick:X,disabled:!d.value.has_prev,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t(s.__("Previous")),9,to),e("button",{onClick:Q,disabled:!d.value.has_next,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t(s.__("Next")),9,so)]),e("div",oo,[e("div",null,[e("p",lo,[x(t(s.__("Showing"))+" ",1),e("span",ao,t(d.value.showing_from),1),x(" "+t(s.__("to"))+" ",1),e("span",no,t(d.value.showing_to),1),x(" "+t(s.__("of"))+" ",1),e("span",io,t(d.value.total),1),x(" "+t(s.__("results")),1)])]),e("div",null,[e("nav",ro,[e("button",{onClick:X,disabled:!d.value.has_prev,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[c(y,{name:"chevron-left",class:"w-5 h-5"})],8,co),e("span",uo,t(s.__("Page {0} of {1}",[d.value.page,d.value.pages])),1),e("button",{onClick:Q,disabled:!d.value.has_next,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[c(y,{name:"chevron-right",class:"w-5 h-5"})],8,mo)])])])])])):b("",!0)]))])]),$.value?(r(),O(Ce,{key:0,modelValue:$.value,"onUpdate:modelValue":o[4]||(o[4]=i=>$.value=i),template:I.value,onSaved:de,onStepChanged:ce},null,8,["modelValue","template"])):b("",!0),T.value?(r(),O(Nt,{key:1,modelValue:T.value,"onUpdate:modelValue":o[5]||(o[5]=i=>T.value=i),templateId:(Y=U.value)==null?void 0:Y.name},null,8,["modelValue","templateId"])):b("",!0),E.value?(r(),u("div",_o,[e("div",go,[o[19]||(o[19]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),o[20]||(o[20]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",vo,[e("div",po,[e("div",ho,[o[17]||(o[17]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",xo,[e("h3",fo,t(s.__("Delete Template")),1),e("div",yo,[e("p",bo,t(s.__('Are you sure you want to delete "{0}"? This action cannot be undone and will also delete all associated template steps.',[(Z=j.value)==null?void 0:Z.template_name])),1)])])])]),e("div",wo,[e("button",{onClick:re,disabled:l.value,class:"w-full inline-flex justify-center rounded-md border border-transparent px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?(r(),u("svg",Co,o[18]||(o[18]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):b("",!0),x(" "+t(l.value?s.__("Deleting..."):s.__("Delete")),1)],8,ko),e("button",{onClick:o[6]||(o[6]=i=>E.value=!1),disabled:l.value,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},t(s.__("Cancel")),9,Mo)])])])])):b("",!0)]),c(g(be))],64)}}};export{Ao as default};
//# sourceMappingURL=CampaignTemplateManagement-4afe9370.js.map
