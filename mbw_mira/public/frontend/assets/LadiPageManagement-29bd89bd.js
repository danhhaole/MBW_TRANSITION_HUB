import{a5 as U,a6 as D,G as A,r as w,a7 as T,c as N,w as H,o as h,a as $,b as d,d as t,t as i,f as r,u as e,k as b,j as c,l as g,h as P,m as q,s as R,e as y,v as I,F as G,i as Q,x as J,I as O,n as K,T as W,Q as X,L as Y}from"./index-d2648b45.js";const Z={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},ee={class:"space-y-4"},te={class:"flex justify-end space-x-2"},ae={__name:"LadiPageFormModal",props:U({modelValue:{type:Boolean,default:!1},page:{type:Object,default:null}},{modelValue:{},modelModifiers:{}}),emits:U(["update:modelValue","saved"],["update:modelValue"]),setup(M,{emit:s}){const v=M,x=s,_=D(),S=A(),u=w({title:"",route:"",campaign:null,published:!1}),m=w({}),f=T(M,"modelValue"),k=N(()=>v.page?__("Edit Ladi Page"):__("Create Ladi Page")),j=N(()=>!!v.page),C=w([]),B=async()=>{try{const l=await _.fetchCampaignOptions();C.value=l}catch(l){console.error("Error loading campaign options:",l)}},V=()=>{u.value={title:"",route:"",campaign:null,published:!1},m.value={}},E=()=>{var p,a;const l={};return(p=u.value.title)!=null&&p.trim()||(l.title=__("Page Title is required")),(a=u.value.route)!=null&&a.trim()||(l.route=__("Route is required")),m.value=l,Object.keys(l).length===0},L=async()=>{if(E())try{let l;return v.page?(await _.updateLadiPage(v.page.name,u.value),l=v.page.name):l=(await _.createLadiPage(u.value)).name,x("saved"),V(),f.value=!1,l}catch(l){console.error("Error saving Ladi page:",l)}},z=async()=>{const l=await L();l&&S.push({name:"ladi-page-editor",params:{id:l}})};return H(()=>v.page,l=>{l?u.value={title:l.title||"",route:l.route||"",campaign:l.campaign||null,published:l.published||!1}:V()},{immediate:!0}),B(),(l,p)=>(h(),$(e(q),{modelValue:f.value,"onUpdate:modelValue":p[5]||(p[5]=a=>f.value=a),options:{size:"lg"}},{"body-title":d(()=>[t("h3",Z,[t("div",null,i(k.value),1)])]),"body-content":d(()=>[t("div",ee,[r(e(b),{type:"text",label:l.__("Page Title"),modelValue:u.value.title,"onUpdate:modelValue":p[0]||(p[0]=a=>u.value.title=a),error:m.value.title,required:""},null,8,["label","modelValue","error"]),r(e(b),{type:"text",label:l.__("Slug"),modelValue:u.value.route,"onUpdate:modelValue":p[1]||(p[1]=a=>u.value.route=a),error:m.value.route,required:""},null,8,["label","modelValue","error"]),r(e(b),{type:"select",label:l.__("Campaign"),modelValue:u.value.campaign,"onUpdate:modelValue":p[2]||(p[2]=a=>u.value.campaign=a),options:C.value,error:m.value.campaign},null,8,["label","modelValue","options","error"]),r(e(b),{type:"checkbox",label:l.__("Published"),modelValue:u.value.published,"onUpdate:modelValue":p[3]||(p[3]=a=>u.value.published=a),error:m.value.published},null,8,["label","modelValue","error"])])]),actions:d(()=>[t("div",te,[r(e(g),{variant:"outline",theme:"gray",onClick:p[4]||(p[4]=a=>f.value=!1)},{default:d(()=>[c(i(l.__("Cancel")),1)]),_:1}),r(e(g),{variant:"solid",theme:"gray",onClick:L,loading:e(_).loading},{default:d(()=>[c(i(l.__("Save")),1)]),_:1},8,["loading"]),j.value?P("",!0):(h(),$(e(g),{key:0,variant:"solid",theme:"blue",onClick:z,loading:e(_).loading},{default:d(()=>[c(i(l.__("Save & Edit")),1)]),_:1},8,["loading"]))])]),_:1},8,["modelValue"]))}},se={class:"min-h-screen bg-gray-50"},le={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-4"},oe={class:"bg-white rounded-lg shadow-sm p-4 mb-4"},ie={class:"flex flex-wrap gap-4 items-center justify-between"},ne={class:"flex-1 min-w-[200px]"},re={class:"flex flex-wrap gap-4"},de={class:"bg-white rounded-lg shadow-sm"},ue={key:1,class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-gray-200"},me={class:"bg-gray-50"},ge={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ce={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},he={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ve={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},_e={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},fe={scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},we={class:"bg-white divide-y divide-gray-200"},ye={key:0,class:"text-center"},xe={colspan:"6",class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},be={class:"px-6 py-4 whitespace-nowrap"},ke={class:"text-sm font-medium text-gray-900"},Ce={class:"text-sm text-gray-500"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Pe={class:"px-6 py-4 whitespace-nowrap"},$e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Me={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Se={class:"flex justify-end space-x-2"},je={key:2,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Be={class:"flex items-center justify-between"},Ee={class:"flex-1 flex justify-between sm:hidden"},ze={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Fe={class:"text-sm text-gray-700"},Ue={class:"font-medium"},Ne={class:"font-medium"},Oe={class:"font-medium"},De={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Te={__name:"LadiPageManagement",setup(M){const s=D(),v=A(),{showSuccess:x,showError:_}=X(),S=[{label:__("Ladi Pages"),route:{name:"ladi-pages"}}],u=w(!1),m=w(!1),f=w(null),k=w([{label:__("All Campaigns"),value:"all"}]),j=async()=>{try{const a=await s.fetchCampaignOptions();k.value=[{label:__("All Campaigns"),value:"all"},...a]}catch(a){console.error("Error loading campaign options:",a)}},C=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",B=a=>{s.setSearchFilter(a)},V=()=>{f.value=null,m.value=!0},E=a=>{v.push({name:"ladi-page-editor",params:{id:a.name}})},L=a=>{v.push({name:"ladi-page-view",params:{id:a.name}})},z=async a=>{if(confirm(__(`Are you sure you want to delete "${a.title}"?`)))try{await s.deleteLadiPage(a.name),x(__("Ladi page deleted successfully"))}catch{_(__("Failed to delete Ladi page"))}},l=()=>{m.value=!1,s.fetchLadiPages(),x(__("Ladi page saved successfully"))},p=async()=>{u.value=!0,await s.fetchLadiPages(),u.value=!1,x(__("Data refreshed"))};return R(async()=>{await j(),await s.fetchLadiPages()}),(a,o)=>(h(),y("div",se,[r(I,null,{"left-header":d(()=>[r(e(J),{items:S})]),"right-header":d(()=>[r(e(g),{variant:"solid",theme:"gray",onClick:V,loading:e(s).loading},{prefix:d(()=>o[8]||(o[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])),default:d(()=>[c(" "+i(a.__("Create Ladi Page")),1)]),_:1},8,["loading"])]),_:1}),t("div",le,[t("div",oe,[t("div",ie,[t("div",ne,[r(e(b),{type:"text",placeholder:a.__("Search Ladi pages..."),modelValue:e(s).filters.search,"onUpdate:modelValue":o[0]||(o[0]=n=>e(s).filters.search=n),onInput:B},null,8,["placeholder","modelValue"])]),t("div",re,[r(e(O),{modelValue:e(s).filters.published,"onUpdate:modelValue":o[1]||(o[1]=n=>e(s).filters.published=n),options:e(s).publishedOptions,onChange:e(s).setPublishedFilter,class:"w-40"},null,8,["modelValue","options","onChange"]),r(e(O),{modelValue:e(s).filters.campaign,"onUpdate:modelValue":o[2]||(o[2]=n=>e(s).filters.campaign=n),options:k.value,onChange:e(s).setCampaignFilter,class:"w-48"},null,8,["modelValue","options","onChange"])]),r(e(g),{variant:"outline",theme:"gray",onClick:p,loading:u.value},{prefix:d(()=>o[9]||(o[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])),default:d(()=>[c(" "+i(a.__("Refresh")),1)]),_:1},8,["loading"])])]),t("div",de,[e(s).loading?(h(),$(Y,{key:0,text:"Loading Ladi pages..."})):(h(),y("div",ue,[t("table",pe,[t("thead",me,[t("tr",null,[t("th",ge,i(a.__("Title")),1),t("th",ce,i(a.__("Slug")),1),t("th",he,i(a.__("Campaign")),1),t("th",ve,i(a.__("Published")),1),t("th",_e,i(a.__("Created")),1),t("th",fe,i(a.__("Actions")),1)])]),t("tbody",we,[e(s).ladiPages.length?P("",!0):(h(),y("tr",ye,[t("td",xe,i(a.__("No Ladi pages found")),1)])),(h(!0),y(G,null,Q(e(s).ladiPages,n=>(h(),y("tr",{key:n.name,class:"hover:bg-gray-50"},[t("td",be,[t("div",ke,i(n.title),1),t("div",Ce,i(n.description),1)]),t("td",Ve,i(n.route),1),t("td",Le,i(n.campaign||a.__("None")),1),t("td",Pe,[t("span",{class:K(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":n.published,"bg-yellow-100 text-yellow-800":!n.published}])},i(n.published?a.__("Published"):a.__("Draft")),3)]),t("td",$e,i(C(n.creation)),1),t("td",Me,[t("div",Se,[r(e(g),{variant:"outline",theme:"blue",size:"sm",onClick:F=>E(n),title:a.__("Edit Content")},{default:d(()=>o[10]||(o[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])),_:2,__:[10]},1032,["onClick","title"]),r(e(g),{variant:"outline",theme:"gray",size:"sm",onClick:F=>L(n),title:a.__("View")},{default:d(()=>o[11]||(o[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])),_:2,__:[11]},1032,["onClick","title"]),r(e(g),{variant:"outline",theme:"red",size:"sm",onClick:F=>z(n),title:a.__("Delete")},{default:d(()=>o[12]||(o[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])),_:2,__:[12]},1032,["onClick","title"])])])]))),128))])])])),e(s).pagination.total>e(s).pagination.limit?(h(),y("div",je,[t("div",Be,[t("div",Ee,[r(e(g),{variant:"outline",theme:"gray",onClick:o[3]||(o[3]=n=>e(s).setPage(e(s).pagination.page-1)),disabled:e(s).pagination.page===1},{default:d(()=>[c(i(a.__("Previous")),1)]),_:1},8,["disabled"]),r(e(g),{variant:"outline",theme:"gray",onClick:o[4]||(o[4]=n=>e(s).setPage(e(s).pagination.page+1)),disabled:e(s).pagination.page===e(s).pagination.pages},{default:d(()=>[c(i(a.__("Next")),1)]),_:1},8,["disabled"])]),t("div",ze,[t("div",null,[t("p",Fe,[c(i(a.__("Showing"))+" ",1),t("span",Ue,i((e(s).pagination.page-1)*e(s).pagination.limit+1),1),c(" "+i(a.__("to"))+" ",1),t("span",Ne,i(Math.min(e(s).pagination.page*e(s).pagination.limit,e(s).pagination.total)),1),c(" "+i(a.__("of"))+" ",1),t("span",Oe,i(e(s).pagination.total),1),c(" "+i(a.__("results")),1)])]),t("div",null,[t("nav",De,[r(e(g),{variant:"outline",theme:"gray",onClick:o[5]||(o[5]=n=>e(s).setPage(e(s).pagination.page-1)),disabled:e(s).pagination.page===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:d(()=>o[13]||(o[13]=[t("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])),_:1,__:[13]},8,["disabled"]),r(e(g),{variant:"outline",theme:"gray",onClick:o[6]||(o[6]=n=>e(s).setPage(e(s).pagination.page+1)),disabled:e(s).pagination.page===e(s).pagination.pages,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:d(()=>o[14]||(o[14]=[t("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])),_:1,__:[14]},8,["disabled"])])])])])])):P("",!0)])]),m.value?(h(),$(ae,{key:0,modelValue:m.value,"onUpdate:modelValue":o[7]||(o[7]=n=>m.value=n),page:f.value,onSaved:l},null,8,["modelValue","page"])):P("",!0),r(e(W))]))}};export{Te as default};
//# sourceMappingURL=LadiPageManagement-29bd89bd.js.map
