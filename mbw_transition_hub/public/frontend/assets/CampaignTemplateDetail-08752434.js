import{_ as se,c as R,r as y,C as W,w as Y,o as r,e as m,d as e,J as pe,t as a,f as c,b as f,u as k,X as ge,l as F,j as g,a0 as J,h as u,k as ve,D as Z,E as ee,a1 as fe,Q as ae,s as he,v as ye,n as U,F as te,i as xe,a as O,G as be,R as we,$ as ke,U as q,T as Se}from"./index-d2648b45.js";import{c as E,C as Ce}from"./CampaignTemplateFormModal-e79aaa9f.js";const $e={key:0,class:"fixed z-50 inset-0 overflow-y-auto"},Me={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Te={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},Ve={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 border-b border-gray-200"},Ae={class:"flex items-center justify-between"},Ee={class:"text-lg leading-6 font-medium text-gray-900"},De={class:"bg-white px-4 pt-5 pb-4 sm:p-6 max-h-96 overflow-y-auto"},Ne={class:"grid grid-cols-1 gap-6"},je={class:"block text-sm font-medium text-gray-700 mb-2"},Le={key:0,class:"mt-1 text-sm text-red-600"},Be={class:"grid grid-cols-2 gap-4"},ze={class:"block text-sm font-medium text-gray-700 mb-2"},Fe={key:0,class:"mt-1 text-sm text-red-600"},Ue={class:"block text-sm font-medium text-gray-700 mb-2"},Oe={key:0,class:"mt-1 text-sm text-red-600"},He={class:"block text-sm font-medium text-gray-700 mb-2"},Ie={class:"mt-1 text-sm text-gray-500"},Je={key:0,class:"mt-1 text-sm text-red-600"},qe={class:"block text-sm font-medium text-gray-700 mb-2"},Re=["placeholder","disabled"],Ke={class:"mt-1 text-sm text-gray-500"},Ge={key:0,class:"mt-1 text-sm text-red-600"},Qe={class:"flex items-center justify-between mb-2"},Xe={class:"block text-sm font-medium text-gray-700"},Pe={key:0,class:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md"},We={class:"text-xs text-blue-800"},Ye={class:"font-medium mb-2"},Ze=["placeholder","disabled"],et={class:"mt-1 text-sm text-gray-500"},tt={key:1,class:"mt-1 text-sm text-red-600"},st={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md"},at={class:"flex"},lt={class:"ml-3"},ot={class:"text-sm font-medium text-red-800"},nt={class:"mt-1 text-sm text-red-700"},it={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},rt={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},dt={__name:"CampaignTemplateStepFormModal",props:{modelValue:{type:Boolean,default:!1},templateName:{type:String,required:!0},step:{type:Object,default:null}},emits:["update:modelValue","saved"],setup(K,{emit:H}){const h=K,D=H,{showSuccess:S,showError:I}=ae(),B=R({get:()=>h.modelValue,set:s=>D("update:modelValue",s)}),x=R(()=>!!h.step),p=y(!1),w=y(""),d=y(!1),i=W({}),l=W({campaign_step_name:"",action_type:"",step_order:1,delay_in_days:0,template_content:"",action_config_string:""}),C=[{label:__("Select action type..."),value:"",disabled:!0},{label:__("Send Email"),value:"SEND_EMAIL"},{label:__("Send SMS"),value:"SEND_SMS"},{label:__("Manual Call"),value:"MANUAL_CALL"},{label:__("Manual Task"),value:"MANUAL_TASK"}],N=()=>{l.campaign_step_name="",l.action_type="",l.step_order=1,l.delay_in_days=0,l.template_content="",l.action_config_string="",Object.keys(i).forEach(s=>{delete i[s]}),w.value="",d.value=!1},M=s=>{s&&(l.campaign_step_name=s.campaign_step_name||"",l.action_type=s.action_type||"",l.step_order=s.step_order||1,l.delay_in_days=s.delay_in_days||0,l.template_content=s.template_content||"",s.action_config?typeof s.action_config=="object"?l.action_config_string=JSON.stringify(s.action_config,null,2):l.action_config_string=s.action_config:l.action_config_string="")},T=()=>{Object.keys(i).forEach(o=>{delete i[o]});let s=!0;if(!l.campaign_step_name||!l.campaign_step_name.trim()?(i.campaign_step_name=__("Step name is required"),s=!1):l.campaign_step_name.length>150&&(i.campaign_step_name=__("Step name must be less than 150 characters"),s=!1),(!l.action_type||!l.action_type.trim())&&(i.action_type=__("Action type is required"),s=!1),(!l.step_order||l.step_order<1||l.step_order>999)&&(i.step_order=__("Step order must be between 1 and 999"),s=!1),(l.delay_in_days<0||l.delay_in_days>365)&&(i.delay_in_days=__("Delay must be between 0 and 365 days"),s=!1),l.action_config_string&&l.action_config_string.trim())try{JSON.parse(l.action_config_string)}catch{i.action_config=__("Invalid JSON format"),s=!1}return s},$=async()=>{if(console.log("Step Modal handleSubmit called!",{isEdit:x.value,formData:{...l}}),!!T()){p.value=!0,w.value="";try{const s={template:h.templateName,campaign_step_name:l.campaign_step_name.trim(),action_type:l.action_type,step_order:l.step_order,delay_in_days:l.delay_in_days,template_content:l.template_content?l.template_content.trim():""};if(l.action_config_string&&l.action_config_string.trim())try{s.action_config=JSON.parse(l.action_config_string)}catch{s.action_config=l.action_config_string}let o;x.value?o=await E.update(h.step.name,s):o=await E.create(s),o.success?(S(o.message||(x.value?__("Step updated successfully"):__("Step added successfully"))),B.value=!1,D("saved",o.data)):o.error.includes("campaign_step_name")?i.campaign_step_name=o.error:o.error.includes("action_type")?i.action_type=o.error:o.error.includes("step_order")?i.step_order=o.error:w.value=o.error}catch(s){console.error("Error submitting form:",s),w.value=__("An error occurred while saving step")}finally{p.value=!1}}},V=()=>{p.value||(B.value=!1)},j=async()=>{if(!x.value&&h.templateName)try{const s=await E.getNextStepOrder(h.templateName);l.step_order=s}catch(s){console.error("Error getting next step order:",s),l.step_order=1}};return Y(()=>h.modelValue,async s=>{s&&(N(),console.log("Step Modal opened:",{isEdit:x.value,step:h.step,templateName:h.templateName}),h.step?fe(()=>{M(h.step)}):await j())},{immediate:!0}),Y(()=>h.step,s=>{s&&h.modelValue&&M(s)}),(s,o)=>B.value?(r(),m("div",$e,[e("div",Me,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:V}),o[13]||(o[13]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",Te,[e("form",{onSubmit:pe($,["prevent"])},[e("div",Ve,[e("div",Ae,[e("h3",Ee,a(x.value?s.__("Edit Template Step"):s.__("Add Template Step")),1),c(k(F),{variant:"ghost",size:"sm",onClick:V},{icon:f(()=>[c(k(ge),{name:"x",class:"w-6 h-6"})]),_:1})])]),e("div",De,[e("div",Ne,[e("div",null,[e("label",je,[g(a(s.__("Step Name"))+" ",1),o[7]||(o[7]=e("span",{class:"text-red-500"},"*",-1))]),c(k(J),{modelValue:l.campaign_step_name,"onUpdate:modelValue":o[0]||(o[0]=v=>l.campaign_step_name=v),type:"text",placeholder:s.__("Enter step name..."),disabled:p.value,class:"w-full"},null,8,["modelValue","placeholder","disabled"]),i.campaign_step_name?(r(),m("div",Le,a(i.campaign_step_name),1)):u("",!0)]),e("div",Be,[e("div",null,[e("label",ze,[g(a(s.__("Action Type"))+" ",1),o[8]||(o[8]=e("span",{class:"text-red-500"},"*",-1))]),c(k(ve),{type:"select",modelValue:l.action_type,"onUpdate:modelValue":o[1]||(o[1]=v=>l.action_type=v),options:C,disabled:p.value,class:"w-full"},null,8,["modelValue","disabled"]),i.action_type?(r(),m("div",Fe,a(i.action_type),1)):u("",!0)]),e("div",null,[e("label",Ue,[g(a(s.__("Step Order"))+" ",1),o[9]||(o[9]=e("span",{class:"text-red-500"},"*",-1))]),c(k(J),{modelValue:l.step_order,"onUpdate:modelValue":o[2]||(o[2]=v=>l.step_order=v),modelModifiers:{number:!0},type:"number",min:"1",max:"999",placeholder:s.__("Order..."),disabled:p.value,class:"w-full"},null,8,["modelValue","placeholder","disabled"]),i.step_order?(r(),m("div",Oe,a(i.step_order),1)):u("",!0)])]),e("div",null,[e("label",He,a(s.__("Delay (Days)")),1),c(k(J),{modelValue:l.delay_in_days,"onUpdate:modelValue":o[3]||(o[3]=v=>l.delay_in_days=v),modelModifiers:{number:!0},type:"number",min:"0",max:"365",placeholder:s.__("0 for immediate execution"),disabled:p.value,class:"w-full"},null,8,["modelValue","placeholder","disabled"]),e("p",Ie,a(s.__("Number of days to wait before executing this step")),1),i.delay_in_days?(r(),m("div",Je,a(i.delay_in_days),1)):u("",!0)]),e("div",null,[e("label",qe,a(s.__("Template Content")),1),Z(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=v=>l.template_content=v),rows:"4",placeholder:s.__("Enter template content for this step..."),disabled:p.value,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,8,Re),[[ee,l.template_content]]),e("p",Ke,a(s.__("Content template for emails, SMS, or other actions")),1),i.template_content?(r(),m("div",Ge,a(i.template_content),1)):u("",!0)]),e("div",null,[e("div",Qe,[e("label",Xe,a(s.__("Action Configuration")),1),c(k(F),{variant:"ghost",size:"sm",onClick:o[5]||(o[5]=v=>d.value=!d.value)},{default:f(()=>[g(a(d.value?s.__("Hide Help"):s.__("Show Help")),1)]),_:1})]),d.value?(r(),m("div",Pe,[e("div",We,[e("p",Ye,a(s.__("Configuration Examples:")),1),o[10]||(o[10]=e("div",{class:"space-y-1"},[e("p",null,[e("strong",null,"Email:"),g(' {"subject": "Title", "from_email": "sender@example.com"}')]),e("p",null,[e("strong",null,"SMS:"),g(' {"phone_field": "mobile", "sender_id": "Company"}')]),e("p",null,[e("strong",null,"Call:"),g(' {"priority": "high", "assign_to": "user@example.com"}')]),e("p",null,[e("strong",null,"Task:"),g(' {"title": "Follow up", "due_date": "+3 days"}')])],-1))])])):u("",!0),Z(e("textarea",{"onUpdate:modelValue":o[6]||(o[6]=v=>l.action_config_string=v),rows:"3",placeholder:s.__("Enter JSON configuration..."),disabled:p.value,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm font-mono text-sm"},null,8,Ze),[[ee,l.action_config_string]]),e("p",et,a(s.__("JSON configuration for the action (optional)")),1),i.action_config?(r(),m("div",tt,a(i.action_config),1)):u("",!0)])]),w.value?(r(),m("div",st,[e("div",at,[o[11]||(o[11]=e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("div",lt,[e("h3",ot,a(s.__("Error saving step")),1),e("div",nt,a(w.value),1)])])])):u("",!0)]),e("div",it,[c(k(F),{type:"submit",variant:"solid",theme:"gray",loading:p.value,disabled:p.value},{default:f(()=>[p.value?(r(),m("svg",rt,o[12]||(o[12]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):u("",!0),g(" "+a(p.value?s.__("Saving..."):x.value?s.__("Update Step"):s.__("Add Step")),1)]),_:1},8,["loading","disabled"]),c(k(F),{variant:"outline",theme:"gray",onClick:V,disabled:p.value,class:"sm:mr-3"},{default:f(()=>[g(a(s.__("Cancel")),1)]),_:1},8,["disabled"])])],32)])])])):u("",!0)}},ct=se(dt,[["__scopeId","data-v-78316b70"]]);const mt={class:"min-h-screen bg-gray-50"},ut={class:"flex items-center space-x-3"},_t={key:0,class:"container mx-auto px-4 sm:px-6 lg:px-8 py-6"},pt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},gt={class:"flex justify-center items-center"},vt={class:"flex items-center space-x-2 text-gray-600"},ft={key:1,class:"container mx-auto px-4 sm:px-6 lg:px-8 py-6"},ht={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},yt={class:"text-center"},xt={class:"mt-2 text-sm font-medium text-gray-900"},bt={class:"mt-1 text-sm text-gray-500"},wt={class:"mt-6"},kt={key:2,class:"container mx-auto px-4 sm:px-6 lg:px-8 py-6"},St={class:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6"},Ct={class:"px-6 py-4 border-b border-gray-200"},$t={class:"flex items-center justify-between"},Mt={class:"flex items-center space-x-4"},Tt={class:"text-xl font-semibold text-gray-900"},Vt={class:"text-sm text-gray-500"},At={class:"flex items-center space-x-2"},Et={class:"px-6 py-4"},Dt={class:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-4"},Nt={class:"text-sm font-medium text-gray-500"},jt={class:"mt-1"},Lt={class:"text-sm font-medium text-gray-500"},Bt={class:"mt-1 flex items-center text-sm text-gray-900"},zt={class:"text-sm font-medium text-gray-500"},Ft={class:"mt-1 text-sm text-gray-900"},Ut={class:"text-sm font-medium text-gray-500"},Ot={class:"mt-1 text-sm text-gray-900"},Ht={key:0,class:"mt-6"},It={class:"text-sm font-medium text-gray-500 mb-2"},Jt={class:"text-sm text-gray-900 p-3 bg-gray-50 rounded-md"},qt={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Rt={class:"px-6 py-4 border-b border-gray-200"},Kt={class:"flex items-center justify-between"},Gt={class:"text-lg font-medium text-gray-900"},Qt={class:"text-sm text-gray-500"},Xt={key:0,class:"p-8"},Pt={class:"flex justify-center items-center"},Wt={class:"flex items-center space-x-2 text-gray-600"},Yt={key:1,class:"p-8"},Zt={class:"text-center"},es={class:"mt-2 text-sm font-medium text-gray-900"},ts={class:"mt-1 text-sm text-gray-500"},ss={class:"mt-6"},as={key:2,class:"divide-y divide-gray-200"},ls={class:"flex items-start justify-between"},os={class:"flex items-start space-x-4 flex-1"},ns={class:"flex-shrink-0"},is={class:"w-8 h-8 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-sm font-medium"},rs={class:"flex-1 min-w-0"},ds={class:"flex items-center space-x-3 mb-2"},cs={class:"text-base font-medium text-gray-900"},ms={class:"flex items-center space-x-6 text-sm text-gray-500 mb-3"},us={class:"flex items-center space-x-1"},_s={key:0,class:"flex items-center space-x-1"},ps={key:1,class:"flex items-center space-x-1"},gs={key:0,class:"mt-3"},vs={class:"bg-gray-50 rounded-md p-3"},fs={class:"text-sm text-gray-700 line-clamp-3"},hs={class:"flex items-center space-x-2 ml-4"},ys=["onClick","title"],xs=["onClick","title"],bs=["onClick","title"],ws=["onClick","title"],ks=["onClick","title"],Ss={key:5,class:"fixed z-50 inset-0 overflow-y-auto"},Cs={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},$s={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ms={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ts={class:"sm:flex sm:items-start"},Vs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},As={class:"text-lg leading-6 font-medium text-gray-900"},Es={class:"mt-2"},Ds={class:"text-sm text-gray-500"},Ns={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},js=["disabled"],Ls={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Bs=["disabled"],zs={__name:"CampaignTemplateDetail",setup(K){const H=be(),h=we(),{showSuccess:D,showError:S}=ae(),I=y(h.params.id),B=R(()=>{var t;return[{label:"Settings",route:{name:"Settings"}},{label:"Campaign Templates",route:{name:"CampaignTemplateManagement"}},{label:((t=d.value)==null?void 0:t.template_name)||"Template Detail",route:{name:"CampaignTemplateDetail",params:{id:I.value}}}]}),x=y(!1),p=y(!1),w=y(null),d=y(null),i=y([]),l=y(!1),C=y(!1),N=y(!1),M=y(null),T=y(null),$=y(!1),V=async()=>{x.value=!0,w.value=null;try{const t=await ke.getById(I.value);t.success?(d.value=t.data,i.value=t.data.steps||[]):w.value=t.error||__("Template not found")}catch(t){console.error("Error loading template:",t),w.value=__("An error occurred while loading template")}finally{x.value=!1}},j=async()=>{if(d.value){p.value=!0;try{const t=await E.getStepsByTemplate(d.value.name);t.success&&(i.value=t.data||[])}catch(t){console.error("Error loading steps:",t)}finally{p.value=!1}}},s=()=>{H.push({name:"CampaignTemplateManagement"})},o=()=>{l.value=!0},v=()=>{M.value=null,C.value=!0},le=t=>{M.value=t,C.value=!0},oe=t=>{T.value=t,N.value=!0},ne=async t=>{try{const n=await E.duplicateStep(t.name);n.success?(D(__("Step duplicated successfully")),await j()):S(n.error||__("Failed to duplicate step"))}catch(n){console.error("Error duplicating step:",n),S(__("An error occurred while duplicating step"))}},G=async(t,n)=>{try{const A=await E.moveStep(t.name,n);A.success?(D(A.message),await j()):S(A.error||__("Failed to move step"))}catch(A){console.error("Error moving step:",A),S(__("An error occurred while moving step"))}},ie=async()=>{if(T.value){$.value=!0;try{const t=await E.delete(T.value.name);t.success?(D(t.message||__("Step deleted successfully")),N.value=!1,T.value=null,await j()):S(t.error||__("Failed to delete step"))}catch(t){console.error("Error deleting step:",t),S(__("An error occurred while deleting step"))}finally{$.value=!1}}},re=()=>{l.value=!1,V()},de=()=>{C.value=!1,M.value=null,j()},ce=t=>{if(!t)return"";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}},me=t=>({Email:"bg-blue-100 text-blue-800",SMS:"bg-green-100 text-green-800",Ads:"bg-purple-100 text-purple-800","Social Media":"bg-pink-100 text-pink-800","Direct Mail":"bg-orange-100 text-orange-800"})[t]||"bg-gray-100 text-gray-800",ue=t=>t?"bg-green-400":"bg-gray-400",_e=t=>({SEND_EMAIL:"bg-blue-100 text-blue-800",SEND_SMS:"bg-green-100 text-green-800",MANUAL_CALL:"bg-yellow-100 text-yellow-800",MANUAL_TASK:"bg-purple-100 text-purple-800"})[t]||"bg-gray-100 text-gray-800";return he(()=>{V()}),(t,n)=>{var Q,X;const A=q("Breadcrumbs"),b=q("FeatherIcon"),L=q("Button");return r(),m(te,null,[e("div",mt,[c(ye,null,{"left-header":f(()=>[c(A,{items:B.value},null,8,["items"])]),"right-header":f(()=>[e("div",ut,[c(L,{variant:"outline",theme:"gray",onClick:s},{prefix:f(()=>[c(b,{name:"arrow-left",class:"w-4 h-4"})]),default:f(()=>[g(" "+a(t.__("Back to Templates")),1)]),_:1}),d.value?(r(),O(L,{key:0,variant:"solid",theme:"blue",onClick:o,loading:x.value},{prefix:f(()=>[c(b,{name:"edit",class:"w-4 h-4"})]),default:f(()=>[g(" "+a(t.__("Edit Template")),1)]),_:1},8,["loading"])):u("",!0),d.value?(r(),O(L,{key:1,variant:"solid",theme:"green",onClick:v,loading:x.value},{prefix:f(()=>[c(b,{name:"plus",class:"w-4 h-4"})]),default:f(()=>[g(" "+a(t.__("Add Step")),1)]),_:1},8,["loading"])):u("",!0)])]),_:1}),x.value?(r(),m("div",_t,[e("div",pt,[e("div",gt,[e("div",vt,[n[3]||(n[3]=e("svg",{class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("span",null,a(t.__("Loading template details...")),1)])])])])):w.value?(r(),m("div",ft,[e("div",ht,[e("div",yt,[n[4]||(n[4]=e("svg",{class:"mx-auto h-12 w-12 text-red-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("h3",xt,a(t.__("Error loading template")),1),e("p",bt,a(w.value),1),e("div",wt,[c(L,{onClick:V,variant:"solid",theme:"blue"},{default:f(()=>[g(a(t.__("Try Again")),1)]),_:1})])])])])):d.value?(r(),m("div",kt,[e("div",St,[e("div",Ct,[e("div",$t,[e("div",Mt,[n[5]||(n[5]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",null,[e("h1",Tt,a(d.value.template_name),1),e("p",Vt,a(d.value.name),1)])]),e("div",At,[e("div",{class:U(["w-3 h-3 rounded-full",ue(d.value.is_active)])},null,2),e("span",{class:U(["text-sm font-medium",d.value.is_active?"text-green-700":"text-gray-700"])},a(d.value.display_status),3)])])]),e("div",Et,[e("dl",Dt,[e("div",null,[e("dt",Nt,a(t.__("Campaign Type")),1),e("dd",jt,[e("span",{class:U(["inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium",me(d.value.campaign_type)])},a(d.value.type_display||d.value.campaign_type),3)])]),e("div",null,[e("dt",Lt,a(t.__("Total Steps")),1),e("dd",Bt,[n[6]||(n[6]=e("svg",{class:"w-4 h-4 text-gray-400 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),g(" "+a(d.value.step_count||0)+" "+a(t.__("steps")),1)])]),e("div",null,[e("dt",zt,a(t.__("Last Modified")),1),e("dd",Ft,a(ce(d.value.modified)),1)]),e("div",null,[e("dt",Ut,a(t.__("Modified By")),1),e("dd",Ot,a(d.value.modified_by||d.value.owner),1)])]),d.value.description?(r(),m("div",Ht,[e("dt",It,a(t.__("Description")),1),e("dd",Jt,a(d.value.description),1)])):u("",!0)])]),e("div",qt,[e("div",Rt,[e("div",Kt,[e("div",null,[e("h2",Gt,a(t.__("Template Steps")),1),e("p",Qt,a(t.__("Configure the sequence of actions for this campaign template")),1)]),c(L,{variant:"solid",theme:"blue",onClick:v,size:"sm"},{prefix:f(()=>[c(b,{name:"plus",class:"w-4 h-4"})]),default:f(()=>[g(" "+a(t.__("Add Step")),1)]),_:1})])]),p.value?(r(),m("div",Xt,[e("div",Pt,[e("div",Wt,[n[7]||(n[7]=e("svg",{class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("span",null,a(t.__("Loading steps...")),1)])])])):!i.value||i.value.length===0?(r(),m("div",Yt,[e("div",Zt,[n[8]||(n[8]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),e("h3",es,a(t.__("No steps configured")),1),e("p",ts,a(t.__("Add steps to define the campaign workflow.")),1),e("div",ss,[c(L,{variant:"solid",theme:"blue",onClick:v},{prefix:f(()=>[c(b,{name:"plus",class:"w-4 h-4"})]),default:f(()=>[g(" "+a(t.__("Add First Step")),1)]),_:1})])])])):(r(),m("div",as,[(r(!0),m(te,null,xe(i.value,(_,P)=>(r(),m("div",{key:_.name,class:"p-6 hover:bg-gray-50 transition-colors duration-150"},[e("div",ls,[e("div",os,[e("div",ns,[e("div",is,a(_.step_order),1)]),e("div",rs,[e("div",ds,[e("h3",cs,a(_.campaign_step_name),1),e("span",{class:U(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",_e(_.action_type)])},a(_.action_type_display),3)]),e("div",ms,[e("div",us,[c(b,{name:"clock",class:"w-4 h-4"}),e("span",null,a(_.delay_display),1)]),_.has_content?(r(),m("div",_s,[c(b,{name:"file-text",class:"w-4 h-4"}),e("span",null,a(t.__("Has content")),1)])):u("",!0),_.has_config?(r(),m("div",ps,[c(b,{name:"settings",class:"w-4 h-4"}),e("span",null,a(t.__("Configured")),1)])):u("",!0)]),_.template_content?(r(),m("div",gs,[e("div",vs,[e("p",fs,a(_.template_content),1)])])):u("",!0)])]),e("div",hs,[P>0?(r(),m("button",{key:0,onClick:z=>G(_,"up"),class:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:t.__("Move Up")},[c(b,{name:"chevron-up",class:"w-4 h-4"})],8,ys)):u("",!0),P<i.value.length-1?(r(),m("button",{key:1,onClick:z=>G(_,"down"),class:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:t.__("Move Down")},[c(b,{name:"chevron-down",class:"w-4 h-4"})],8,xs)):u("",!0),e("button",{onClick:z=>le(_),class:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:t.__("Edit Step")},[c(b,{name:"edit",class:"w-4 h-4"})],8,bs),e("button",{onClick:z=>ne(_),class:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:t.__("Duplicate Step")},[c(b,{name:"copy",class:"w-4 h-4"})],8,ws),e("button",{onClick:z=>oe(_),class:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:t.__("Delete Step")},[c(b,{name:"trash-2",class:"w-4 h-4"})],8,ks)])])]))),128))]))])])):u("",!0),l.value?(r(),O(Ce,{key:3,modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=_=>l.value=_),template:d.value,onSaved:re},null,8,["modelValue","template"])):u("",!0),C.value?(r(),O(ct,{key:4,modelValue:C.value,"onUpdate:modelValue":n[1]||(n[1]=_=>C.value=_),"template-name":(Q=d.value)==null?void 0:Q.name,step:M.value,onSaved:de},null,8,["modelValue","template-name","step"])):u("",!0),N.value?(r(),m("div",Ss,[e("div",Cs,[n[11]||(n[11]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),n[12]||(n[12]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",$s,[e("div",Ms,[e("div",Ts,[n[9]||(n[9]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Vs,[e("h3",As,a(t.__("Delete Step")),1),e("div",Es,[e("p",Ds,a(t.__('Are you sure you want to delete step "{0}"? This action cannot be undone. All following steps will be reordered.',[(X=T.value)==null?void 0:X.campaign_step_name])),1)])])])]),e("div",Ns,[e("button",{onClick:ie,disabled:$.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[$.value?(r(),m("svg",Ls,n[10]||(n[10]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):u("",!0),g(" "+a($.value?t.__("Deleting..."):t.__("Delete")),1)],8,js),e("button",{onClick:n[2]||(n[2]=_=>N.value=!1),disabled:$.value,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},a(t.__("Cancel")),9,Bs)])])])])):u("",!0)]),c(k(Se))],64)}}},Os=se(zs,[["__scopeId","data-v-d71c4604"]]);export{Os as default};
//# sourceMappingURL=CampaignTemplateDetail-08752434.js.map
