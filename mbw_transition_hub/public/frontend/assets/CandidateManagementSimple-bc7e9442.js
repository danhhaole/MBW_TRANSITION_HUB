import{r as c,w as O,s as G,e as r,f as _,b as m,v as $,d as t,D as L,E as B,u as y,a as W,h as x,t as s,F as k,i as C,n as p,G as j,o as n,x as F,I as N,j as H,l as z,W as E,L as P}from"./index-d2648b45.js";const q={class:"min-h-screen bg-gray-50"},J={class:"container mx-auto px-6 py-6"},K={class:"flex items-center justify-between mb-6"},Q={class:"relative"},X=["placeholder"],Y={class:"flex items-center space-x-4"},Z={class:"bg-white rounded-lg border border-gray-200"},ee={key:1,class:"overflow-x-auto"},te={class:"min-w-full divide-y divide-gray-200"},ae={class:"bg-gray-50"},le={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},se={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},oe={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ne={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},re={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ie={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ue={class:"bg-white divide-y divide-gray-200"},de={class:"px-6 py-4"},ce=["onClick"],pe={class:"px-6 py-4"},_e={class:"px-6 py-4"},ge={class:"px-6 py-4"},ve={class:"px-6 py-4"},me={class:"px-6 py-4"},ye={key:0},xe={colspan:"6",class:"px-6 py-8 text-center text-gray-500"},he={key:0,class:"flex items-center justify-between px-6 py-4 border-t border-gray-200"},be={class:"text-sm text-gray-500"},fe={class:"flex items-center space-x-2"},we=["disabled"],ke=["onClick"],Ce=["disabled"],Re={__name:"CandidateManagementSimple",setup(Ne){const R=j(),S=[{label:__("Candidates"),route:{name:"CandidateManagementSimple"}}],i=c(!1),h=c([]),a=c({page:1,limit:10,total:0,pages:0,has_next:!1,has_prev:!1}),u=c(""),g=c("all"),v=c("all"),A=[{label:__("All Statuses"),value:"all"},{label:"NEW",value:"NEW"},{label:"SOURCED",value:"SOURCED"},{label:"NURTURING",value:"NURTURING"},{label:"ENGAGED",value:"ENGAGED"},{label:"ARCHIVED",value:"ARCHIVED"}],V=[{label:__("All Sources"),value:"all"},{label:__("Manual"),value:"Manual"},{label:__("LinkedIn"),value:"LinkedIn"},{label:__("Email"),value:"Email"},{label:__("Referral"),value:"Referral"},{label:__("ATS Import"),value:"ATS Import"},{label:__("Website"),value:"Website"}],D=async()=>{const e=[];g.value!=="all"&&e.push(["status","=",g.value]),v.value!=="all"&&e.push(["source","=",v.value]),u.value&&u.value.trim()&&e.push(["full_name","like",`%${u.value.trim()}%`]);const o=await E("frappe.client.get_list",{doctype:"Candidate",filters:e.length?e:{},fields:["name","full_name","email","phone","source","status","email_opt_out","creation"],order_by:"modified desc",limit_start:(a.value.page-1)*a.value.limit,limit_page_length:a.value.limit}),l=await E("frappe.client.get_count",{doctype:"Candidate",filters:e.length?e:{}});h.value=o||[],a.value.total=l||0,a.value.pages=Math.ceil((l||0)/a.value.limit)},d=async()=>{i.value=!0;try{await D()}finally{i.value=!1}};let b=null;const w=()=>{b&&clearTimeout(b),b=setTimeout(()=>{a.value.page=1,d()},300)};O(u,()=>w());const I=e=>R.push(`/candidates-simple/${e.name}`),T=e=>({NEW:"bg-gray-100 text-gray-800",SOURCED:"bg-blue-100 text-blue-800",NURTURING:"bg-yellow-100 text-yellow-800",ENGAGED:"bg-green-100 text-green-800",ARCHIVED:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",U=e=>e?"bg-red-100 text-red-800":"bg-green-100 text-green-800",f=async e=>{a.value.pages&&(e<1||e>a.value.pages||e!==a.value.page&&(a.value.page=e,await d()))};return G(async()=>{await d()}),(e,o)=>(n(),r("div",q,[_($,null,{"left-header":m(()=>[_(y(F),{items:S})]),"right-header":m(()=>o[5]||(o[5]=[])),_:1}),t("div",J,[t("div",K,[t("div",Q,[L(t("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>u.value=l),type:"text",placeholder:e.__("Search by name..."),class:"block w-60 pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onInput:w},null,40,X),[[B,u.value]]),o[6]||(o[6]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),t("div",Y,[_(y(N),{modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=l=>g.value=l),options:A,onChange:d,class:"min-w-40 text-sm",size:"md",variant:"outlined",placeholder:"All Statuses"},null,8,["modelValue"]),_(y(N),{modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=l=>v.value=l),options:V,onChange:d,class:"min-w-40 text-sm",size:"md",variant:"outlined",placeholder:"All Sources"},null,8,["modelValue"]),_(y(z),{variant:"outline",theme:"gray",onClick:d,loading:i.value,class:"flex items-center py-4"},{prefix:m(()=>[(n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",class:p(["h-4 w-4",{"animate-spin":i.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o[7]||(o[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2))]),default:m(()=>[H(" "+s(e.__("Refresh")),1)]),_:1},8,["loading"])])]),t("div",Z,[i.value?(n(),W(P,{key:0,text:"Loading candidates..."})):x("",!0),i.value?x("",!0):(n(),r("div",ee,[t("table",te,[t("thead",ae,[t("tr",null,[t("th",le,s(e.__("Full Name")),1),t("th",se,s(e.__("Email")),1),t("th",oe,s(e.__("Phone")),1),t("th",ne,s(e.__("Source")),1),t("th",re,s(e.__("Status")),1),t("th",ie,s(e.__("Email Opt Out")),1)])]),t("tbody",ue,[(n(!0),r(k,null,C(h.value,l=>(n(),r("tr",{key:l.name,class:"hover:bg-gray-50"},[t("td",de,[t("button",{class:"text-left text-gray-900 hover:underline",onClick:M=>I(l)},s(l.full_name),9,ce)]),t("td",pe,s(l.email||e.__("None")),1),t("td",_e,s(l.phone||e.__("None")),1),t("td",ge,s(l.source||e.__("None")),1),t("td",ve,[t("span",{class:p([T(l.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},s(l.status||e.__("None")),3)]),t("td",me,[t("span",{class:p([U(l.email_opt_out),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},s(l.email_opt_out?e.__("Opted Out"):e.__("Active")),3)])]))),128)),h.value.length===0?(n(),r("tr",ye,[t("td",xe,s(e.__("No records")),1)])):x("",!0)])]),a.value.pages>1?(n(),r("div",he,[t("div",be,s(e.__("Display"))+" "+s(Math.min((a.value.page-1)*a.value.limit+1,a.value.total))+"-"+s(Math.min(a.value.page*a.value.limit,a.value.total))+" "+s(e.__("of"))+" "+s(a.value.total)+" "+s(e.__("records")),1),t("div",fe,[t("button",{class:p(["px-3 py-1 rounded border text-sm",a.value.page===1?"text-gray-400 border-gray-200 cursor-not-allowed":"text-gray-700 border-gray-300 hover:bg-gray-50"]),disabled:a.value.page===1,onClick:o[3]||(o[3]=l=>f(a.value.page-1))},s(e.__("Prev")),11,we),(n(!0),r(k,null,C(a.value.pages,l=>(n(),r("button",{key:l,class:p(["px-3 py-1 rounded border text-sm",l===a.value.page?"bg-black text-white border-black":"text-gray-700 border-gray-300 hover:bg-gray-50"]),onClick:M=>f(l)},s(l),11,ke))),128)),t("button",{class:p(["px-3 py-1 rounded border text-sm",a.value.page===a.value.pages?"text-gray-400 border-gray-200 cursor-not-allowed":"text-gray-700 border-gray-300 hover:bg-gray-50"]),disabled:a.value.page===a.value.pages,onClick:o[4]||(o[4]=l=>f(a.value.page+1))},s(e.__("Next")),11,Ce)])])):x("",!0)]))])])]))}};export{Re as default};
//# sourceMappingURL=CandidateManagementSimple-bc7e9442.js.map
